var e=Object.defineProperty,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,t=(o,l,a)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,n=(e,n)=>{for(var d in n||(n={}))l.call(n,d)&&t(e,d,n[d]);if(o)for(var d of o(n))a.call(n,d)&&t(e,d,n[d]);return e};import{_ as d}from"./index-95fa0fb7.js";import{h as r,P as i,t as s,f as u,o as f,g as m,D as p,C as c,I as w,i as h,s as b,J as g,S as I,p as D,N as y}from"./vendor-ad157f17.js";const C={props:{title:{type:String,default:""},dialogShow:{type:Boolean,default:!1},rowInfo:{type:Object,default:()=>({})},arrayNum:{type:Number,default:0}},setup(e,{emit:o}){const l=r({dialogFlag:!1,formData:{}}),a=r({handleClose(){o("update:dialogShow",!1)},resetForm(){l.formData=Object.assign({},e.rowInfo)},submitForm(){a.handleClose(),e.rowInfo.name?o("editRow",l.formData):(l.formData.id=e.arrayNum+1,o("addRow",l.formData))}});return i((()=>{l.formData=Object.assign({},e.rowInfo),l.dialogFlag=e.rowInfo})),n(n({},s(l)),a)}},x=w("确定"),S=w("重置");var _=d(C,[["render",function(e,o,l,a,t,n){const d=u("el-input"),r=u("el-form-item"),i=u("el-button"),s=u("el-form"),w=u("el-dialog");return f(),m(w,{"model-value":!0,title:l.title,onClose:e.handleClose},{default:p((()=>[c(s,{ref:"ruleFormRef",model:e.formData,rules:e.rules,"label-width":"120px",class:"demo-ruleForm",size:e.formSize},{default:p((()=>[c(r,{label:"姓名：",prop:"name"},{default:p((()=>[c(d,{modelValue:e.formData.name,"onUpdate:modelValue":o[0]||(o[0]=o=>e.formData.name=o)},null,8,["modelValue"])])),_:1}),c(r,{label:"性别：",prop:"sex"},{default:p((()=>[c(d,{modelValue:e.formData.sex,"onUpdate:modelValue":o[1]||(o[1]=o=>e.formData.sex=o)},null,8,["modelValue"])])),_:1}),c(r,{label:"年龄：",prop:"age"},{default:p((()=>[c(d,{modelValue:e.formData.age,"onUpdate:modelValue":o[2]||(o[2]=o=>e.formData.age=o)},null,8,["modelValue"])])),_:1}),c(r,null,{default:p((()=>[c(i,{type:"primary",onClick:o[3]||(o[3]=o=>e.submitForm())},{default:p((()=>[x])),_:1}),c(i,{onClick:o[4]||(o[4]=o=>e.resetForm())},{default:p((()=>[S])),_:1})])),_:1})])),_:1},8,["model","rules","size"])])),_:1},8,["title","onClose"])}]]);const k={props:{rowInfo:{type:Object,default:()=>({})}},emit:["closeDetail"],setup(e,{emit:o}){const l={studentInfo:h((()=>e.rowInfo)).value},a={handleClose(){o("closeDetail")}};return n(n({},s(l)),a)}},v=b("label",{for:"name"},"姓名：",-1),R={id:"name"},j=b("label",{for:"sex"},"性别：",-1),O={id:"sex"},V=b("label",{for:"age"},"年龄：",-1),F={id:"age"};const N={components:{Dialog:_,Detail:d(k,[["render",function(e,o,l,a,t,n){const d=u("el-dialog");return f(),m(d,{"model-value":!0,title:"详情",onClose:e.handleClose},{default:p((()=>[b("p",null,[v,b("span",R,g(e.studentInfo.name),1)]),b("p",null,[j,b("span",O,g(e.studentInfo.sex),1)]),b("p",null,[V,b("span",F,g(e.studentInfo.age),1)])])),_:1},8,["onClose"])}]])},setup(){const e=r({dialogShow:!1,detailShow:!1,rowInfo:{},title:"",studentInfo:[{id:1,name:"星星",sex:"女",age:18},{id:2,name:"月亮",sex:"男",age:19}]}),o=r({handleNew(){e.title="新增",e.rowInfo={},e.dialogShow=!0},handleDetail(o){e.detailShow=!0,e.rowInfo=o},handleEdit(o){e.title="修改",e.dialogShow=!0,e.rowInfo=o},handleDel(e){I.confirm("你确定删除这个学生的信息吗?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{o.handleSure(e)})).catch((()=>{}))},handleSure(o){this.dialogVisible=!1;const l=e.studentInfo.findIndex((e=>e.id===o.id));e.studentInfo.splice(l,1)},addRow(o){e.studentInfo.push(o)},editRow(o){let l=e.studentInfo.findIndex(((e,l)=>e.id===o.id));e.studentInfo.splice(l,1,o)},closeDetail(){e.detailShow=!1}});return n(n({},s(e)),o)}},z={class:"box"},E=w("新增"),P=w("查看"),U=w("编辑"),B=w("删除");var A=d(N,[["render",function(e,o,l,a,t,n){const d=u("el-button"),r=u("el-table-column"),i=u("el-table"),s=u("Dialog"),w=u("Detail");return f(),D("div",z,[c(d,{class:"new_btn",type:"primary",onClick:e.handleNew},{default:p((()=>[E])),_:1},8,["onClick"]),c(i,{data:e.studentInfo,border:"",style:{width:"100%"}},{default:p((()=>[c(r,{prop:"name",label:"姓名"}),c(r,{prop:"sex",label:"性别"}),c(r,{prop:"age",label:"年龄"}),c(r,{fixed:"right",label:"操作"},{default:p((({row:o})=>[c(d,{type:"text",size:"small",onClick:l=>e.handleDetail(o)},{default:p((()=>[P])),_:2},1032,["onClick"]),c(d,{type:"text",size:"small",onClick:l=>e.handleEdit(o)},{default:p((()=>[U])),_:2},1032,["onClick"]),c(d,{type:"text",size:"small",onClick:l=>e.handleDel(o)},{default:p((()=>[B])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),e.dialogShow?(f(),m(s,{key:0,dialogShow:e.dialogShow,"onUpdate:dialogShow":o[0]||(o[0]=o=>e.dialogShow=o),rowInfo:e.rowInfo,title:e.title,arrayNum:e.studentInfo.length,onAddRow:e.addRow,onEditRow:e.editRow},null,8,["dialogShow","rowInfo","title","arrayNum","onAddRow","onEditRow"])):y("",!0),e.detailShow?(f(),m(w,{key:1,rowInfo:e.rowInfo,onCloseDetail:e.closeDetail},null,8,["rowInfo","onCloseDetail"])):y("",!0)])}],["__scopeId","data-v-8b1baaee"]]);export{A as default};
